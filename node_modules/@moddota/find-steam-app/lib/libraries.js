"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const fs_extra_1 = tslib_1.__importDefault(require("fs-extra"));
const path_1 = tslib_1.__importDefault(require("path"));
const vdf_extra_1 = tslib_1.__importDefault(require("vdf-extra"));
async function loadSteamLibraries(steam) {
    const mainSteamApps = path_1.default.join(steam, 'steamapps');
    const libraryFoldersPath = path_1.default.join(mainSteamApps, 'libraryfolders.vdf');
    const libraryFoldersContent = await fs_extra_1.default.readFile(libraryFoldersPath, 'utf8');
    const libraryFoldersData = vdf_extra_1.default.parse(libraryFoldersContent);
    const libraries = Object.entries(libraryFoldersData)
        .filter(([id]) => !isNaN(Number(id)))
        .map(([, libPath]) => path_1.default.join(typeof libPath === 'string' ? libPath : libPath.path, 'steamapps'));
    return [mainSteamApps, ...libraries];
}
exports.loadSteamLibraries = loadSteamLibraries;
//# sourceMappingURL=libraries.js.map